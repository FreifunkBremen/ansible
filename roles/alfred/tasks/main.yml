---
# Repository is currently unsigned, thus no key needs to be added
#- name: Add repository-gpg-key for alfred+batadv-vis
#  apt_key: keyserver={{ pgp_keyserver }} id={{ alfred_repository_key }}

- name: Add repository for alfred
  apt_repository: repo="deb {{ alfred_repository }}"

- name: Install packages
  apt: name={{item}} force=yes
  with_items:
  - alfred
  - alfred-json
  - batadv-vis

- name: Configure alfred interfaces
  template: >
    src=alfred-default
    dest=/etc/default/alfred
    mode=0644
  notify: restart alfred

- name: Configurate batadv-vis interfaces
  template: >
    src=batadv-vis-default
    dest=/etc/default/batadv-vis
    mode=0644
  notify: restart batadv-vis

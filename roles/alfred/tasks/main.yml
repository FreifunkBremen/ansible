---
#- name: Add repository-gpg-key for alfred+batadv-vis
#  apt_key: keyserver={{ alfred_pgp_keyserver }} id={{ alfred_repository_key }}

- name: Add repository for alfred
  apt_repository: repo='{{item}}'
  with_items:
  - 'deb {{ alfred_repository }}'
  - 'deb-src {{ alfred_repository }}'

- name: Install packages
  apt: name={{item}}  force=yes
  with_items:
  - alfred
  - alfred-json
  - batadv-vis

- name: Configurate alfred interfaces
  template: >
    src=alfred-default
    dest=/etc/default/alfred
    mode=0640

- name: Start alfred
  service: name=alfred state=restarted enabled=yes

- name: Configurate batadv-vis interfaces
  template: >
    src=batadv-vis-default
    dest=/etc/default/batadv-vis
    mode=0640

- name: Start batadv-vis
  service: name=batadv-vis state=started enabled=yes

log to syslog level warn;
hide ip addresses yes;
status socket "/run/fastd.sock";

# Set the interface name
interface "{{ site_code }}-mesh-vpn";

# Support xsalsa20 and aes128 encryption methods, prefer xsalsa20
method "salsa2012+gmac";
method "xsalsa20-poly1305";
method "null";

secure handshakes yes;

# Bind to a fixed port, IPv4 only
bind 0.0.0.0:10000;

include "secret.conf";

# Set the interface MTU for TAP mode with xsalsa20/aes128 over IPv4 with a base MTU of 1492 (PPPoE)
# (see MTU selection documentation)
mtu {{ fastd_mtu }};

on up "ifup --allow hotplug bat0";
on down "ifdown --allow hotplug bat0";

on verify "/etc/fastd/{{ site_code }}/blacklist.sh /opt/vpn-blacklist/blacklist.json";

include peers from "peers";

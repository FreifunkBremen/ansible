discover-cmds      = /usr/bin/awk -F= '{ print $1 }' < /etc/nagios/ssh-forcecommand.cfg
discover-distro    = /usr/bin/lsb_release -i -s
{% if monitoring_client_contact_group is defined %}
fetch-config       = /bin/echo '{ "contact_groups": "{{ monitoring_client_contact_group }}" }'
{% endif %}
check_load         = /usr/lib/nagios/plugins/check_load -w {{ ansible_processor_nproc * 2 }},{{ (ansible_processor_nproc * 1.5) | round | int }},{{ ansible_processor_nproc }} -c {{ ansible_processor_nproc * 3 }},{{ (ansible_processor_nproc * 2.5) | round | int }},{{ ansible_processor_nproc * 2}}
check_disks        = /usr/lib/nagios/plugins/check_disk -W 10% -K 5% -w 15% -c 10% -p / -p /var/tmp
check_zombies      = /usr/lib/nagios/plugins/check_procs -w 5 -c 10 -s Z
check_updates      = /usr/lib/nagios/plugins/check_apt -d -t 30
check_needrestart  = sudo /usr/sbin/needrestart -p
check_etckeeper    = sudo /usr/local/lib/nagios/plugins/check_git_status /etc
check_release_eol  = /usr/local/lib/nagios/plugins/check_release_eol --localDID --releaseIgnore --lts --server
check_rkhunter     = /usr/local/lib/nagios/plugins/check_rkhunter
check_mailq        = /usr/lib/nagios/plugins/check_mailq -w 3 -c 5
{% if ansible_swaptotal_mb > 0 %}
check_swap         = /usr/lib/nagios/plugins/check_swap -w 20 -c 10
{% endif %}
{% if (('vpnservers' in group_names) or ('vpnservers_legacy' in group_names)) %}
check_conntrack    = /usr/local/lib/nagios/plugins/check_conntrack.sh 80 90
check_dhcp         = sudo /usr/lib/nagios/plugins/check_dhcp -i {{ main_bridge }} -u -s {{ batman_ipv4.address }} -t 5
check_tinc_running = /usr/lib/nagios/plugins/check_procs -C tincd -c 1:
{% endif %}
